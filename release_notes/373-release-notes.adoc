:_content-type: ASSEMBLY
[id="release-notes-373"]
= Red Hat Advanced Cluster Security for Kubernetes 3.73
include::modules/common-attributes.adoc[]
:context: release-notes-373

toc::[]

{product-title} ({product-title-short}) is an enterprise-ready, Kubernetes-native container security solution that protects your vital applications across build, deploy, and runtime stages of the application lifecycle. It deploys in your infrastructure and integrates with your DevOps tools and workflows to deliver better security and compliance and to enable DevOps and InfoSec teams to operationalize security.

.Release dates
[options="header"]
|====
|{product-title-short} version |Released on
|`3.73.0` |6 December 2022
|====

[id="about-this-release-373"]
== About this release

{product-title-short} 3.73 includes:

* Red Hat Advanced Cluster Security Cloud Service (Field Trial)
* Improved Vulnerability management dashboard for ACSCS users
* PostgreSQL database option (Technology Preview)
* Build-time Kubernetes network policy generator (Technology Preview)
* Feature enhancements and bug fixes


[id="new-features-373"]
== New features

[id="rhacs-cloud-service"]
=== Red Hat Advanced Cluster Security Cloud Service

Red Hat Advanced Cluster Security Cloud Service (ACSCS) is a Red Hat managed service that simplifies and accelerates {product-title-short} deployments.

:FeatureName: {product-title-managed-short}
include::snippets/field-trial.adoc[leveloffset=+1]


With ACSCS, Red Hat hosts and maintains your {product-title-short} Central instance.
Red Hat assures high availability of your instance with an industry-standard service level agreement (SLA).
After launching an ACSCS instance, you can connect your secured clusters and image repositories, and configure integrations to secure your hybrid Kubernetes infrastructure across Red Hat OpenShift Container Platform, Amazon Elastic Kubernetes Service (EKS), Microsoft Azure Kubernetes Service (AKS), and Google Kubernetes Engine (GKE).

For more information and to try ACSCS, see link:https://www.redhat.com/en/engage/security-managed-service-20221011[Request early access to Red Hat Advanced Cluster Security Cloud Service].

The following new documentation topics are available for ACSCS installation:

* xref:../installing/getting-started-rhacs-cloud-ocp.adoc#getting-started-rhacs-cloud-ocp[Getting started with {product-title-short} Cloud Service]
* xref:../installing/installing_cloud_ocp/install-rhacs-cloud-ocp.adoc#install-rhacs-cloud-ocp[Setting up {product-title-short} Cloud Service on Red Hat OpenShift]
* xref:../installing/installing_cloud_other/install-rhacs-cloud-other.adoc#install-rhacs-cloud-other[Setting up {product-title-short} Cloud Service on other platforms]

[NOTE]
====
The following documentation topics do not apply to ACSCS:

* xref:../installing/installing_ocp/install-central-ocp.adoc#install-central-ocp[Installing Central services for RHACS on Red Hat OpenShift]
* xref:../installing/installing_ocp/install-central-config-options-ocp.adoc#install-central-config-options-ocp[Optional - Configuring Central configuration options for RHACS using the Operator]
* xref:../installing/installing_other/install-central-other.adoc#install-central-other[Installing Central services for RHACS on other platforms]
* xref:../upgrading/upgrade-helm.adoc#change-config-options-after-deployment-central-services_upgrade-helm[Changing configuration options after deploying the central-services Helm charts]
* xref:../upgrading/upgrade-roxctl.adoc#upgrade-roxctl[Upgrading the Central cluster
]
* xref:../configuration/enable-offline-mode.adoc#enable-offline-mode[Enabling offline mode]
* xref:../configuration/expose-portal-over-http.adoc#expose-portal-over-http[Exposing the {product-title-short} portal over HTTP]
* xref:../configuration/configure-proxy.adoc#configure-proxy[Configuring a proxy for external network access]
* xref:../configuration/configure-endpoints.adoc#configure-endpoints[Configuring endpoints]
* xref:../configuration/monitor-acs.adoc#monitor-acs[Monitoring with Prometheus]
* xref:../operating/manage-user-access/configure-ocp-oauth.adoc#configure-ocp-oauth[Configuring OpenShift Container Platform OAuth server as an identity provider]
* xref:../backup_and_restore/backing-up-acs.adoc#backing-up-acs[Backing up Red Hat Advanced Cluster Security for Kubernetes]
* xref:../backup_and_restore/restore-acs.adoc#restore-acs[Restoring from a backup]
====

[id="improved-vulnerability-management-dashboard"]
==== Improved Vulnerability management dashboard for ACSCS users
ACSCS includes a few updates in the vulnerability management dashboard in the {product-title-short} portal.
On-premise {product-title-short} installations will eventually include these updates in future versions.
ACSCS includes the following changes:

* The vulnerability management dashboard now groups Common Vulnerabilities and Exposures (CVEs) into *Image CVEs*, *Node CVEs*, and *Platform CVEs* categories.
You can access these categories when you click *CVEs* on the *Vulnerability Management* view header.
Or, when viewing a list of entities, these categories are listed under *All entities*.
* In the *Node CVEs* and *Image CVEs* list views:

** A new *Operating System* column shows the base operating system of the image that contains the CVE.

** A new *Severity* column shows the severity of the package's vulnerability in the operating system context.
One CVE may have different severity levels depending on the operating system.

* Some CVEs may occur in more than one category.
When you select the Defer and Approve option for a CVE from a specific category, that CVE gets deferred only for the selected category.
For example, if a CVE applies to both *Node CVEs* and *Image CVEs*, when you defer that CVE from the *Node CVEs* category, it still appears in the *Image CVEs* category.

[id="postgresql-database-option"]
=== PostgreSQL database option (Technology Preview)

:FeatureName: PostgreSQL support
include::snippets/technology-preview.adoc[]

{product-title-short} will use PostgreSQL as its backend database in the future, replacing the in-memory RocksDB database used today.
This transition will be a part of a future release upgrade, with a fully-automated migration from the current architecture to PostgreSQL-based architecture.

With PostgreSQL, customers benefit from improved performance, standard database procedures for scaling the database, backup and restore, and recovery from a disaster using PostgreSQL database backups.
In addition, you can use your existing PostgreSQL infrastructure to provision a PostgreSQL database for {product-title-short}.

With {product-title-short} version 3.73, the PostgreSQL option is available as a Technology Preview feature.
If you are interested in participating in the Tech Preview program, Red Hat will work with you to manually migrate to PostgreSQL so that you can explore these benefits in a test environment before we release this feature.
Contact your Red Hat account representative to participate.

[NOTE]
====
When Red Hat releases this feature, PostgreSQL will become a requirement for {product-title-short}, and you will not be able to upgrade {product-title-short} without using PostgreSQL.
====

[id="build-time-network-policy-generator"]
=== Build-time Kubernetes network policy generator (Technology Preview)

:FeatureName: Build-time Kubernetes network policy generator
include::snippets/technology-preview.adoc[]

{product-title-short} 3.73 introduces a new build-time capability in the `roxctl` command-line interface (CLI), to generate Kubernetes network policies based on Application YAML manifests.
You can use it to develop network policies as part of the CI/CD pipeline before deploying applications on your cluster.

Red Hat developed this feature in partnership with the developers of the link:https://np-guard.github.io/[NP-Guard project].
The build-time network policy generator analyzes Kubernetes manifests in a local folder, including service manifests, configuration maps and workload manifests such as Pod, Deployment, ReplicaSet, Job, DaemonSet, and StatefulSet.
It discovers the required connectivity and creates the Kubernetes network policies to achieve pod isolation.
These policies allow no more and no less than the needed ingress and egress traffic.
For the build-time network policy generation feature, `roxctl` CLI does not need to communicate with {product-title-short} Central. Therefore you can use it in any development environment.

For more details, see xref:../operating/manage-network-policies.adoc#using-build-time-network-policy-generator[Using build-time network policy generator].

[id="notable-tech-changes-373"]
== Notable technical changes

* {product-title-short} uses GraphQL internally to show data in the {product-title-short} portal. However, Red Hat does not support querying {product-title-short} using GraphQL.
Instead, use the REST API queries to access data. The {product-title-short} 3.73 release introduces some breaking changes in the existing GraphQL queries.
If you are using GraphQL, see https://access.redhat.com/articles/6986289 and contact Red Hat Consulting.
* Sensor no longer uses `anyuid` Security Context Constraint (SCC). Instead, the default SCC for Sensor is now `restricted[-v2]` or `stackrox-sensor`, depending on the settings. In addition, the `runAsUser` and `fsGroup` for the Admission control and Sensor deployments are no longer hard-coded to `4000` on OpenShift clusters to allow using the `restricted` and `restricted-v2` SCCs. (link:https://issues.redhat.com/browse/ROX-9342[ROX-9342])
* The service account `central`, which the Central deployment uses, now includes `get` and `list` access to the following resources in the namespace where you deploy Central:

** pods
** events
** Namespaces
* The CSV export API `/api/vm/export/csv` now requires the `CVE Type` filter as part of the input query parameter. Requests that do not have the filter returns an error. Supported values for `CVE Type` are `IMAGE_CVE`, `K8S_CVE`, `ISTIO_CVE`, `NODE_CVE`, and `OPENSHIFT_CVE`.


[id="deprecation-notices-373"]
== Deprecated and removed features

Some features available in previous releases have been deprecated or removed.

Deprecated functionality is still included in {product-title-short} and continues to be supported; however, it will be removed in a future release of this product and is not recommended for new deployments. For the most recent list of major functionality deprecated and removed, refer to the table below. Additional information about some removed or deprecated functionality is available after the table.

In the table, features are marked with the following statuses:

- GA: General Availability
- TP: Technology Preview
- DEP: Deprecated
- REM: Removed
- NA: Not applicable


.Deprecated and removed features tracker
[cols="3,1,1,1",options="header"]
|====
| Feature | {product-title-short} 3.71 |{product-title-short} 3.72 | {product-title-short} 3.73

| RenamePolicyCategory and DeletePolicyCategory Application Programming Interface (API) endpoints
| DEP
| DEP
| REM

| Support for violation tags and process tags
| DEP
| REM
| NA

| Permissions: `AuthPlugin`, `AuthProvider`, `Group`, `Licenses`, `Role`, `User`, `Indicator`, `NetworkBaseline`, `ProcessWhitelist`, `Risk`, `APIToken`, `BackupPlugins`, `ImageIntegration`, `Notifier`, `SignatureIntegration`, `ImageComponent`
| DEP
| DEP
| REM

| Retrieving groups by property
| DEP
| DEP
| REM

| `vulns` fields of `storage.Node` object in response payload of `v1/nodes`
| DEP
| DEP
| REM

| `/v1/cves/suppress` and `/v1/cves/unsuppress`
| DEP
| DEP
a|
* DEP in {product-title-short} 3.73
* REM in ACSCS



| `ids` field in the `/v1/cves/suppress` and `/v1/cves/unsuppress` API payload
| DEP
| DEP
a|
* DEP in {product-title-short} 3.73
* REM in ACSCS

| `cves.ids` field of the `storage.VulnerabilityRequest` object in the response of `VulnerabilityRequestService` endpoints
| DEP
| DEP
| REM

| Scanning support for Ubuntu 21.10
| GA
| REM
| NA

| Permission `ClusterCVE`
| GA
| DEP
| DEP

| `Label` and `Annotation` search options
| GA
| DEP
| DEP

| Environment variable `ROX_WHITELIST_GENERATION_DURATION`
| NA
| NA
| REM

|====

[id="removed-features-373"]
=== Removed features

This section provides additional information about some of the removed features listed in the previous table.

* The `ROX_WHITELIST_GENERATION_DURATION` environment variable is removed in the {product-title-short} 3.73 release.
You can use `ROX_BASELINE_GENERATION_DURATION` instead.
* Red Hat has removed `whitelist_statuses` from the response of the `/v1/deploymentswithprocessinfo` endpoint.
* The `ids` field in the `/v1/cves/suppress` and `/v1/cves/unsuppress` API payload is renamed to `cves` in the {product-title-short} 3.73 release.
* The `cves.ids` field of the `storage.VulnerabilityRequest` object in the response of `VulnerabilityRequestService` endpoints is renamed to `cves.cves` in the {product-title-short} 3.73 release.
* For the `/v1/groups` endpoint, you can no longer use the *Get*, *Update*, *Mutate*, and *Remove* functions without specifying a value for `props.id` field when using the `props` field. (link:https://issues.redhat.com/browse/ROX-11592[ROX-11592])
* Red Hat has removed the `ComplianceRunSchedule` resource, which {product-title-short} did not use.
* Red Hat has simplified the {product-title-short} access permissions. The following list describes the new permissions and indicates the removed permissions in the {product-title-short} 3.73.0 release:

** The `Access` permission replaces the `AuthPlugin`, `AuthProvider`, `Group`, `Licenses`, `Role`, and `User` permissions.
** The `DeploymentExtension` permission replaces the `Indicator`, `NetworkBaseline`, `ProcessWhitelist`, and `Risk` permissions.
** The `Integration` permission deprecates the `APIToken`, `BackupPlugins`, `ImageIntegration`, `Notifier`, and `SignatureIntegration` permissions.
** The `Image` permission replaces the `ImageComponent` permission.
* Central reaches out to Scanner on the `scanner.<namespace>.svc` endpoint instead of `scanner.<namespace>` to respect OpenShift Container Platform’s `NO_PROXY` configuration.
If you are using `NO_PROXY` and you experience connectivity issues for image scanning, add `*.svc` or `scanner.<namespace>.svc` to your `NO_PROXY` configuration. (link:https://issues.redhat.com/browse/ROX-13034[ROX-13034])
* `Label` and `Annotation` search options are removed in the {product-title-short} 3.73 release.
They are replaced by the search options listed in the following table:
+
.Search options
[cols="1,1,1",options="header"]
|====
|Resource |Deprecated search option | New search option

| `Node`
| `Label`
| `Node Label`

| `Node`
| `Annotation`
| `Node Annotation`

| `Namespace`
| `Label`
| `Namespace Label`

| `Deployment`
| `Label`
| `Deployment Label`

| `ServiceAccount`
| `Label`
| `Service Account Label`

| `ServiceAccount`
| `Annotation`
| `Service Account Annotation`

| `K8sRole`
| `Label`
| `Role Binding Label`

| `K8sRoleAnnotation`
| `Annotation`
| `Role Binding Annotation`

|====

[id="deprecated-features-373"]
=== Deprecated features

The following list describes the new permissions and indicates the deprecated permissions that will be removed in a future release:

* New permission `Administration` will deprecate the permissions `AllComments`, `Config`, `DebugLogs`, `NetworkGraphConfig`, `ProbeUpload`, `ScannerBundle`, `ScannerDefinitions`, `SensorUpgradeConfig`, and `ServiceIdentity`.
* The permission `Compliance` will deprecate the permission `ComplianceRuns`.



[id="upcoming-in-product-docs-removal"]
=== Notice of upcoming in-product docs removal

Beginning in the {product-title-short} 3.74 release, Red Hat will remove the in-product docs accessible from the help menu.
If you are using the in-product docs, you can instead download the required documentation in PDF format from link:https://access.redhat.com/documentation/en-us/red_hat_advanced_cluster_security_for_kubernetes/[Red Hat Customer Portal]. (link:link:https://issues.redhat.com/browse/ROX-12839[ROX-12839])

[id="bug-fixes-373"]
== Bug fixes

* Previously, if you were using StackRox Kubernetes Security Platform - Splunk Technology Add-on, results for the `ocp4-cis-node` compliance standard was missing from Splunk. The Splunk integration now includes the `ocp4-cis-node` compliance standard results. (link:https://issues.redhat.com/browse/ROX-11937[ROX-11937])
* Previously, Central failed on the `v1 CronJob` deployment YAML check. This issue is fixed. (link:https://issues.redhat.com/browse/ROX-13500[ROX-13500])
* Previously, when you rebooted the {ocp} cluster `scanner-db` pod would get stuck in the `init` state. This issue is fixed. (link:https://issues.redhat.com/browse/ROX-12556[ROX-12556])

[id="image-versions-373"]
== Image versions

[%header,cols="1,1,2"]
|===
| Image | Description | Current version

| Main
| Includes Central, Sensor, Admission controller, and Compliance. Also includes `roxctl` for use in continuous integration (CI) systems.
a| `registry.redhat.io/advanced-cluster-security/rhacs-main-rhel8:3.73`

| Scanner
| Scans images and nodes.
a|`registry.redhat.io/advanced-cluster-security/rhacs-scanner-rhel8:3.73`

| Scanner DB
| Stores image scan results and vulnerability definitions.
a|`registry.redhat.io/advanced-cluster-security/rhacs-scanner-db-rhel8:3.73`

| Collector
| Collects runtime activity in Kubernetes or {ocp} clusters.
a| * `registry.redhat.io/advanced-cluster-security/rhacs-collector-rhel8:3.73` +
* `registry.redhat.io/advanced-cluster-security/rhacs-collector-slim-rhel8:3.73`
|===
