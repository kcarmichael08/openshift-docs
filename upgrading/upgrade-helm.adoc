:_content-type: ASSEMBLY
[id="upgrade-helm"]
= Upgrading using Helm charts
include::modules/common-attributes.adoc[]
:context: upgrade-helm

toc::[]

[role="_abstract"]
You can upgrade to the latest version of {product-title} from a supported older version. For upgrading to {product-title-short} 4.0, you must be using the latest patch release of {product-title-short} 3.74. If you are using an older version, you must first upgrade to {product-title-short} 3.74.

If you have installed {product-title} by using Helm charts, to upgrade to the latest version of {product-title} you must perform the following:

* Backup the Central database.
* (Optional) Optimize Central database and Persistent Volume Claims (PVC).
* (Optional) Generate `values-private.yaml` configuration file containing root certificates for the central-services Helm chart.
* Update the Helm chart.
* Run the `helm upgrade` command.

[IMPORTANT]
====
To ensure optimal functionality, use the same version for your secured-cluster-services Helm chart and central-services Helm chart. For {product-title-managed-short}, use the latest version of the secured-cluster-services Helm chart that is available. (The software version for Central is automatically updated.)
====

include::modules/back-up-central-database.adoc[leveloffset=+1]

[role="_additional-resources"]
.Additional resources
* xref:../backup_and_restore/backing-up-acs.adoc#on-demand-backups-roxctl[On-demand backups by using the roxctl CLI]
* xref:../cli/installing-the-roxctl-cli.adoc#installing-the-roxctl-cli[Installing the roxctl CLI]

include::modules/helm-optimize-central-db-and-pvc.adoc[leveloffset=+1]

include::modules/helm-generate-root-certificates.adoc[leveloffset=+1]

include::modules/updating-helm-repository.adoc[leveloffset=+1]

[role="_additional-resources"]
== Additional resources
* xref:../installing/installing_ocp/install-central-ocp.adoc#install-using-helm-no-customizations-ocp[Installing Central using Helm charts]
* xref:../installing/installing_ocp/install-secured-cluster-ocp.adoc#installing-sc-helm[Installing {product-title-short} on secured clusters by using Helm charts]

include::modules/upgrade-helm-chart.adoc[leveloffset=+1]

include::modules/remove-central-attached-pv-overview.adoc[leveloffset=+1]

include::modules/remove-central-attached-pv-helm.adoc[leveloffset=+2]

include::modules/rollback-helm-upgrade.adoc[leveloffset=+1]
